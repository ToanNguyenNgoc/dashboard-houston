import{a3 as N,w as i,j as e,c as a,aB as h,r as c,A as x,F as m,P as C,q as y,s as v,y as k,aC as p,I as f}from"./index-ebcff714.js";import{u as b}from"./useQuery-a6480589.js";import{d as w}from"./Edit-67c052b0.js";import{D as F,d as q}from"./Delete-af50aa6a.js";import"./jsx-runtime_commonjs-proxy-0bea5e44.js";const g=({open:t,setOpen:r,id:s})=>{const{handleSubmit:n,register:d,reset:u,setValue:l}=N({defaultValues:{name:"",description:"",status:!0}});return b({queryKey:["FOOD_CATE",s],queryFn:()=>i.foodCate(s??0),enabled:!!(t&&s),onSuccess:o=>{l("name",o.data.name),l("description",o.data.description??"")}}),e(F,{open:t,onClose:()=>r(!1),children:a("div",{className:"food-cate-form",children:[e("div",{className:"title",children:s?"Create new category":"Update category"}),a("form",{action:"",children:[a("div",{className:"form_column",children:[e("label",{className:"form-label required",children:"Category name"}),e("input",{type:"text",className:"form-control form-control-solid",...d("name",{required:!0})})]}),a("div",{className:"form_column",children:[e("label",{className:"form-label required",children:"Description"}),e("textarea",{className:"form-control form-control-solid",...d("description",{required:!0})})]}),a("div",{className:"bottom",children:[e(h,{variant:"contained",children:"Restore"}),e(h,{variant:"contained",style:{backgroundColor:"var(--bs-green)"},children:"Save"})]})]})]})})};function H(){const{branch:t}=c.useContext(x),r={branch_id:t==null?void 0:t.id},{data:s}=b({queryKey:["FOOD_CATE",r],queryFn:()=>i.foodCates(r)}),n=(s==null?void 0:s.data)??[];return a(m,{children:[e(C,{children:"Food category"}),a("div",{className:"card card-account card-villa-cate",children:[e("div",{className:"card-header border-0 pt-5",children:e("div",{className:"card-toolbar",children:e(D,{})})}),e("div",{className:"card-body py-3",children:e("div",{className:"table-responsive",children:a("table",{className:"table align-middle gs-0 gy-4",children:[e("thead",{children:a("tr",{className:"fw-bold text-muted bg-light",children:[e("th",{className:"ps-4 min-w-200px rounded-start",children:"Category name"}),e("th",{className:"min-w-80px",children:"Status"}),e("th",{className:"min-w-200px",children:"Description"}),e("th",{className:"min-w-150px",children:"Created at"}),e("th",{className:"min-w-150px",children:"Updated at"}),e("th",{className:"min-w-100px"})]})}),e("tbody",{children:n.map(d=>e(_,{cate:d},d.id))})]})})})]})]})}const D=()=>{const[t,r]=c.useState(!1);return a(m,{children:[e(y,{title:"Create new category",variant:"contained",onClick:()=>r(!0)}),e(g,{open:t,setOpen:r})]})},_=({cate:t})=>{const[r,s]=c.useState(!1),{handle:n}=v(),[d,u]=c.useState(t.status),l=o=>{n({handleFn:()=>i.putFoodCate(t.id,{status:o.target.checked})}),u(o.target.checked)};return a(m,{children:[e(g,{open:r,setOpen:s,id:t.id}),a("tr",{children:[e("td",{children:e("div",{className:"d-flex align-items-center",children:e("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:t.name})})}),e("td",{children:e("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:e(k,{onChange:l,checked:d})})}),e("td",{children:e("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:t.description})}),e("td",{children:e("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:p(t.updated_at).format("DD/MM/YYYY HH:mm")})}),e("td",{children:e("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:p(t.updated_at).format("DD/MM/YYYY HH:mm")})}),a("td",{children:[e(f,{size:"small",style:{backgroundColor:"var(--kt-gray-200)"},onClick:()=>s(!0),children:e(w,{color:"success"})}),e(f,{size:"small",style:{backgroundColor:"var(--kt-gray-200)",marginLeft:"8px"},children:e(q,{color:"error"})})]})]},t.id)]})};export{H as default};
